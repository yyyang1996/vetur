(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{218:function(t,e,a){"use strict";a.r(e);var s=a(28),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"interpolation-support"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interpolation-support"}},[t._v("#")]),t._v(" Interpolation Support")]),t._v(" "),a("p",[t._v("Vue template allows JavaScript-esque expression in four constructs:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org/v2/guide/syntax.html#Directives",target:"_blank",rel:"noopener noreferrer"}},[t._v("Directives"),a("OutboundLink")],1),t._v(" like "),a("code",[t._v('v-if="exp"')])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://vuejs.org/v2/guide/syntax.html#Attributes",target:"_blank",rel:"noopener noreferrer"}},[t._v("Attributes"),a("OutboundLink")],1),t._v(" like "),a("code",[t._v(':id="exp"')])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://vuejs.org/v2/guide/events.html#Method-Event-Handlers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Event Handlers"),a("OutboundLink")],1),t._v(" like "),a("code",[t._v('@click="exp"')])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://vuejs.org/v2/guide/syntax.html#Text",target:"_blank",rel:"noopener noreferrer"}},[t._v("Template Interpolations"),a("OutboundLink")],1),t._v(" like")])]),t._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ exp }}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("Other than the "),a("a",{attrs:{href:"https://vuejs.org/v2/guide/filters.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("filter syntax"),a("OutboundLink")],1),t._v(", the expression is 100% JavaScript expression.")]),t._v(" "),a("p",[t._v("Vetur now offers completion, diagnostics, hover, jump to definition, find references for these JavaScript snippets.")]),t._v(" "),a("h2",{attrs:{id:"generic-language-features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generic-language-features"}},[t._v("#")]),t._v(" Generic Language Features")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("These features are experimental and you need to set "),a("code",[t._v("vetur.experimental.templateInterpolationService: true")]),t._v(" to enable them. You can also only disable template diagnostics with "),a("code",[t._v("vetur.validation.template: false")]),t._v(", although that disables the built-in ESLint checking, too.")])]),t._v(" "),a("p",[t._v("Currently diagnostics, hover, jump to definition and find references are implemented in this way:")]),t._v(" "),a("ul",[a("li",[t._v("Compile original Vue template into a virtual TypeSript file")]),t._v(" "),a("li",[t._v("Generate a sourcemap between expressions in original "),a("code",[t._v(".vue")]),t._v(" file and the virtual file")]),t._v(" "),a("li",[t._v("Run language feature requests on the virtual TypeScript file")]),t._v(" "),a("li",[t._v("Map results back to original "),a("code",[t._v(".vue")]),t._v(" file")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v('Use the command "Vetur: Show corresponding virtual file and sourcemap" to understand how the\ntemplates are represented in Vetur. Useful for bug filing too.')])]),t._v(" "),a("p",[t._v("If you do find bugs, please "),a("a",{attrs:{href:"https://github.com/vuejs/vetur/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("fill an issue"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("If you want more details as to how this feature is implemented, I wrote a blog post: "),a("a",{attrs:{href:"https://blog.matsu.io/generic-vue-template-interpolation-language-features",target:"_blank",rel:"noopener noreferrer"}},[t._v("Generic Vue Template Interpolation Language Features\n"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"completion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#completion"}},[t._v("#")]),t._v(" Completion")]),t._v(" "),a("p",[t._v("Completion now works a little bit differently than the other language features. Mainly because completion works off a\nSyntactically incomplete file and the generic compiler from Vue template to virtual TypeScript file cannot handle that yet.")]),t._v(" "),a("p",[t._v("Completion:")]),t._v(" "),a("ul",[a("li",[t._v("Collects information from "),a("code",[t._v("<script>")]),t._v(" region by traversing its AST")]),t._v(" "),a("li",[t._v("Offer "),a("code",[t._v("props")]),t._v(", "),a("code",[t._v("data")]),t._v(" and "),a("code",[t._v("methods")]),t._v(" in interpolation regions")]),t._v(" "),a("li",[t._v("Offer "),a("code",[t._v(":prop")]),t._v(" completion on child components")])]),t._v(" "),a("h2",{attrs:{id:"type-checking-with-jsdocs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type-checking-with-jsdocs"}},[t._v("#")]),t._v(" Type Checking with JSDocs")]),t._v(" "),a("p",[t._v("You don't have to use "),a("code",[t._v('lang="ts"')]),t._v(" for typing functions. This would show error that "),a("code",[t._v("'foo'")]),t._v(" is not assignable to "),a("code",[t._v("number")])]),t._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ numOnly(post.body) }}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @typedef {object} Post\n * @property {string} body\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  props"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    post"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n       * @type {import('vue').PropType<Post>}\n       */")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      required"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  methods"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * @param {number} num\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("numOnly")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);